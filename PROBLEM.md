問題概要
======

![ビジュアライザイメージ](/img/vis.png) 

これはエージェントを操作してタスクを達成し、それによって得られる点数を競うゲームです。

フィールド内には 5 体のエージェントがいて、エージェントはフィールド内を移動することができます。

フィールドは線分 (0, 0), (30, 30) を対角線とする正方形であり、フィールド内に A から Z までの合計 26 個 のチェックポイントがあります。

タスクは英大文字列で表されます。
"ABC" というタスクは、エージェントが A, B, C の順でチェックポイントを移動すると達成することができます。

達成したタスクに応じて、点数がもらえます。

ゲーム終了時点での点数を競います。

## 点数計算
達成した各タスクについて
```
タスクの重み × 自分の達成回数 / 全ユーザ合計の達成回数
```
を計算し、その合計が点数になります。

ゲーム終了時点での点数を競います。ゲーム中の点数は暫定のものです。

### 点数計算例
現在の状態が 状態1 だとします。

**状態1**
- タスク "ABC" : 重み100 自分0回 全体9回 達成済
- タスク "BCD" : 重み200 自分0回 全体0回 達成済
- あなたの合計点数: 0点

状態1 から、あなたのエージェントが A → B → C → D と順に移動すると 状態2 に移ります。

**状態2**
- タスク "ABC" : 重み100 自分1回 全体10回 達成済
- タスク "BCD" : 重み200 自分1回 全体1回 達成済
- あなたの合計点数: 210点

```
ABCを達成した点数 = 100 * 1 / 10 = 10
BCDを達成した点数 = 200 * 1 / 1 = 200
```
この時点での暫定合計点数は210点です。

状態2 から、他のプレイヤーが10回 "ABC", "BCD" を達成すると 状態3 に移ります。

**状態3**
- タスク "ABC" : 重み100 自分1回 全体20回 達成済
- タスク "BCD" : 重み200 自分1回 全体11回 達成済
- あなたの合計点数: 23.18点

```
ABCを達成した点数 = 100 * 1 / 20 = 5
BCDを達成した点数 = 200 * 1 / 11 = 18.18...
```
この時点での暫定合計点数は23.18点です。

※他のプレイヤーがタスクを達成すると自分の点数が下がることに注意


## 移動にかかる時間
エージェントの移動には時間がかかります。

座標 `(x1, y1)` から `(x2, y2)` に移動する際にかかる時間は以下の式で与えられます。

```
100 * √((x1-x2)² + (y1-y2)²) [ミリ秒]
```

例) `(0, 0)` から `(10, 10)` への移動には 1414 ミリ秒かかる。


## タスク

### ゲーム進行中に新しいタスクが追加される
- 与えられる時間や、タスクの内容は参加中のプレイヤー全員同じである
- 次にタスクが追加される時刻はAPIで取得可能

### タスクに関する情報
- 総タスク数150
  - ゲーム開始時に12個のタスクが与えられ、10分毎に6個のタスクが追加される
- 追加されるタスクの重みは、50分経過時のタスクまでは重み100、60分経過時のタスクからは重み10000
- 追加されるタスクの文字列長は、5文字以上10文字以下

### タスク追加時刻後に達成可能
- 時刻 `t1` で追加されるタスクは、 `t1` 以降 (`t1`を含む) に到達したチェックポイントに基づいて達成したかが判定される
  - `t1` より前に到達したチェックポイントはそのタスク達成判定には影響しない

### 移動履歴はエージェント毎に独立
例) タスク "ABC" が存在するとき
- エージェント1 : A → B
- エージェント2 : C

と移動しても, "ABC" は達成したことになりません。

### タスク達成回数
タスクの達成回数は、タスク文字列が、移動履歴文字列中に何回出現するかで計算します。

例1)
- タスク: "ABC"
- 移動履歴: "ABDC"

このとき "ABC" の達成回数は0回

例2)
- タスク: "ABCA"
- 移動履歴: "ABCABCA"

このとき "ABC" の達成回数は2回

## 即時移動と予約移動
移動には 即時移動と予約移動の2種類が存在します。
予約移動をうまく使うことで、効率よくエージェントを移動させることができます。

### 即時移動
即時移動では、エージェントはその時点の位置からすぐに移動を開始します。
予約移動がされていた場合、その予約移動は無効となります。

`(x1, y1)` から `(x2, y2)` に移動中で、その移動にかかる時間が `T` 、移動開始から経過した時間が `t` のとき、`(x1 + (x2-x1)*t/T, y1 + (y2-y1)*t/T)`がその時点の位置となります。

### 予約移動
予約移動では、エージェントが移動中の場合、目的地に到達してから指定された座標への移動を開始します。

目的地に到達する前に複数回の予約移動が行われた場合、最後の予約移動以外は上書きされて無効となります。
エージェントが移動中ではない場合、予約移動は即時移動として扱われます。

## チェックポイントの到達判定
チェックポイントに到達したと判定されるには、移動の目的地として指定する必要があります。

- 例えば、(1, 6) から (5, 8) に移動しても、(3, 7) にあるチェックポイントに到達したとは判定されない

![図1](/img/1.png)

予約移動によって滞在時間が0になっても移動の目的地であれば到達したと判定されます。

- 例えば、(1, 6) から (3, 7) に移動中に (5, 8) に予約移動をして、
この移動が完了したとき、(3, 7)に滞在した時間は 0 だが、(3, 7) にあるチェックポイントに到達したと判定される

![図2](/img/2.png)

## 同一チェックポイントへの到達
チェックポイントにいるときに、一度別の地点に移動してから同じチェックポイントに移動することで、そのチェックポイントに連続して複数回到達することができます。

例)
- (2, 6) にチェックポイントAがあるとき、 (2, 6) → (1, 6) → (2, 6) と移動することで、移動履歴は A → A となる
